(function(e){function t(t){for(var a,o,s=t[0],c=t[1],l=t[2],d=0,v=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&v.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(v.length)v.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/code-scanner-pwa/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0423":function(e){e.exports=JSON.parse('{"message":"こんにちは i18n !!"}')},"049a":function(e,t,n){"use strict";n("3b9b")},"3b9b":function(e,t,n){},"49f8":function(e,t,n){var a={"./en.json":"edd4","./fr.json":"f693","./ja.json":"0423"};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id="49f8"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("AppBar",{attrs:{"running-device":e.deviceId}}),n("v-main",[e.supported?[n("Camera",{ref:"camera",staticClass:"mt-6",on:{ready:e.startDetection,open:e.onOpenVideo}}),n("div",{staticClass:"d-flex justify-center mt-16"},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{width:"2",indeterminate:""}})],1),n("DetectionResult",{ref:"results",on:{close:e.startCamera}})]:n("div",{staticClass:"pa-4 font-weight-black"},[e._v(e._s(e.$t("bad_browser")))])],2)],1)},i=[],o=n("2909"),s=n("1da1"),c=(n("96cf"),n("d3b7"),n("caad"),n("2532"),n("d81d"),n("99af"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{attrs:{app:""}},[n("v-app-bar-title",[e._v("Code Scanner")]),n("v-spacer"),n("CameraSelection",{attrs:{current:e.runningDevice}}),n("Locale")],1)}),l=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({directives:[{name:"show",rawName:"v-show",value:e.hasSelection,expression:"hasSelection"}],attrs:{text:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-video")]),n("v-icon",{attrs:{"x-small":""}},[e._v("mdi-chevron-down")])],1)]}}]),model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[n("v-list",[n("v-list-item-group",{model:{value:e.current,callback:function(t){e.current=t},expression:"current"}},e._l(e.videoDevices,(function(t){var a=t.label,r=t.deviceId;return n("v-list-item",{key:r,attrs:{value:r}},[n("v-list-item-title",[e._v(e._s(a))])],1)})),1)],1)],1)},d=[],v=(n("dca8"),n("4de4"),Object.freeze({GRANTED:"granted",DENIED:"denied",PROMPT:"prompt"})),p={data:function(){return{cameraPermission:null}},computed:{allowed:function(){return this.cameraPermission!==v.DENIED}},mounted:function(){this.listenPermissions()},methods:{listenPermissions:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.permissions.query({name:"camera"});case 2:n=t.sent,e.cameraPermission=n.state,n.onchange=function(t){if("change"===t.type){var n=t.target.state;e.cameraPermission=n}};case 5:case"end":return t.stop()}}),t)})))()}}},f=Object.freeze({VIDEOINPUT:"videoinput",AUDIOINPUT:"audioinput",AUDIOOUTPUT:"audiooutput"}),m={mixins:[p],props:{current:String},data:function(){return{videoDevices:[],selectedCamera:null,opened:!1}},computed:{hasSelection:function(){return!0}},watch:{allowed:{handler:function(e){e&&this.listCameras()},immediate:!0},opened:function(e){e&&console.log(this.deviceId)}},methods:{listCameras:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.enumerateDevices();case 3:n=t.sent,e.videoDevices=n.filter((function(e){var t=e.kind,n=e.label;return t===f.VIDEOINPUT&&n})),console.log("Video devices",e.videoDevices),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Failed to enumerate devices"),e.videoDevices=[];case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},h=m,b=n("2877"),g=n("6544"),w=n.n(g),_=n("8336"),O=n("132d"),V=n("8860"),y=n("da13"),k=n("1baa"),j=n("5d23"),S=n("e449"),x=Object(b["a"])(h,u,d,!1,null,null,null),E=x.exports;w()(x,{VBtn:_["a"],VIcon:O["a"],VList:V["a"],VListItem:y["a"],VListItemGroup:k["a"],VListItemTitle:j["c"],VMenu:S["a"]});var A,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{text:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-translate")]),n("v-icon",{attrs:{"x-small":""}},[e._v("mdi-chevron-down")])],1)]}}])},[n("v-list",[n("v-list-item-group",{model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}},e._l(e.availableLocales,(function(t){var a=t.locale,r=t.language;return n("v-list-item",{key:a,attrs:{value:a}},[n("v-list-item-title",[e._v(e._s(r))])],1)})),1)],1)],1)},C=[],I=(n("159b"),n("ddb0"),n("ac1f"),n("466d"),n("a925"));a["a"].use(I["a"]);var T="lang",N="en";function R(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){var r=a[1];t[r]=e(n)}})),t}var L=null===(A=navigator.language.match(/[a-z]+/))||void 0===A?void 0:A[0],P=localStorage.getItem(T)||Object({NODE_ENV:"production",BASE_URL:"/code-scanner-pwa/"}).VUE_APP_I18N_LOCALE||L;function $(e){localStorage.setItem(T,e)}var U=new I["a"]({locale:P||N,fallbackLocale:Object({NODE_ENV:"production",BASE_URL:"/code-scanner-pwa/"}).VUE_APP_I18N_FALLBACK_LOCALE||N,messages:R()}),M={computed:{locale:{get:function(){return this.$i18n.locale},set:function(e){this.$i18n.locale=e,$(e)}}},created:function(){this.availableLocales=[{locale:"en",language:"English"},{locale:"fr",language:"Français"},{locale:"ja",language:"日本語"}]}},B=M,F=Object(b["a"])(B,D,C,!1,null,null,null),H=F.exports;w()(F,{VBtn:_["a"],VIcon:O["a"],VList:V["a"],VListItem:y["a"],VListItemGroup:k["a"],VListItemTitle:j["c"],VMenu:S["a"]});var z={components:{CameraSelection:E,Locale:H},props:{runningDevice:String}},q=z,G=n("40dc"),J=n("bb78"),W=n("2fa4"),K=Object(b["a"])(q,c,l,!1,null,null,null),Z=K.exports;w()(K,{VAppBar:G["a"],VAppBarTitle:J["a"],VSpacer:W["a"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.allowed,expression:"!allowed"}],staticClass:"font-weight-black message"},[e._v(e._s(e.$t("camera_not_allowed")))]),n("video",{ref:"video",attrs:{id:"video",autoplay:""},on:{loadeddata:e.onVideoStateChange}})])},X=[],Y=Object.freeze({HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}),ee={mixins:[p],data:function(){return{started:!1}},watch:{allowed:{handler:function(e){e&&this.started?this.createVideoStream():e||this.stopVideoStream()},immediate:!0},started:function(e){e&&this.allowed&&this.createVideoStream()}},created:function(){this.videoStream=null},methods:{createVideoStream:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.creatingStream&&!e.videoStream){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.creatingStream=!0,t.next=6,navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}});case 6:e.videoStream=t.sent,i=null===(n=e.videoStream.getVideoTracks())||void 0===n||null===(a=n[0])||void 0===a||null===(r=a.getSettings())||void 0===r?void 0:r.deviceId,e.$emit("open",i),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.videoStream=null;case 14:return t.prev=14,e.creatingStream=!1,e.$refs.video.srcObject=e.videoStream,t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[2,11,14,18]])})))()},stopVideoStream:function(){var e,t,n=null!==(e=null===(t=this.videoStream)||void 0===t?void 0:t.getVideoTracks())&&void 0!==e?e:[];n.forEach((function(e){e.stop()})),this.videoStream=null,this.$refs.video.srcObject=null},start:function(){this.started&&this.$refs.video.paused?this.$refs.video.play():this.started=!0},pause:function(){this.$refs.video.pause()},stop:function(){this.started=!1,this.stopVideoStream()},onVideoStateChange:function(){this.$refs.video.readyState===Y.HAVE_ENOUGH_DATA&&this.$emit("ready",this.$refs.video)}}},te=ee,ne=(n("049a"),Object(b["a"])(te,Q,X,!1,null,"0f6f7e66",null)),ae=ne.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{fullscreen:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",flat:""}},[n("v-toolbar-title",[e._v(e._s(e.results.length)+" codes found")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.visible=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-list",{staticClass:"overflow-y-auto"},e._l(e.results,(function(t,a){var r=t.rawValue,i=t.format;return n("div",{key:"result-"+a},[n("ResultListItem",{attrs:{rawValue:r,format:i},on:{copy:function(t){e.copySnackbar=!0}}}),n("v-divider")],1)})),0)],1),n("v-snackbar",{attrs:{timeout:"2000"},model:{value:e.copySnackbar,callback:function(t){e.copySnackbar=t},expression:"copySnackbar"}},[n("span",[e._v("Text copied")])])],1)},ie=[],oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.rawValue))]),n("v-list-item-subtitle",[e._v(e._s(e.format))])],1),n("v-list-item-action",[n("div",[e.isURL?n("v-btn",{attrs:{href:e.rawValue,target:"_blank",icon:""}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-open-in-new")])],1):e._e(),n("v-btn",{staticClass:"ml-2",attrs:{icon:""},on:{click:e.copyToClipboard}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-content-copy")])],1)],1)])],1)},se=[],ce=(n("07ac"),n("d4ec")),le=n("bee2"),ue=n("d5e4"),de=n("9bd1"),ve=n("5364"),pe=(n("3ca3"),n("10d1"),Object.freeze({AZTEC:"aztec",CODE_128:"code_128",CODE_39:"code_39",CODE_93:"code_93",CODABAR:"codabar",DATA_MATRIX:"data_matrix",EAN_13:"ean_13",EAN_8:"ean_8",ITF:"itf",PDF417:"pdf417",QR_CODE:"qr_code",UPC_A:"upc_a",UPC_E:"upc_e",UNKNOWN:"unknown"})),fe=new WeakMap,me=new WeakMap,he=new WeakMap,be=new WeakMap,ge=function(){function e(){var t=this;Object(ce["a"])(this,e),Object(ue["a"])(this,fe,{writable:!0,value:void 0}),Object(ue["a"])(this,me,{writable:!0,value:void 0}),Object(ue["a"])(this,he,{writable:!0,value:void 0}),Object(ue["a"])(this,be,{writable:!0,value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=de["a"],e.t1=t,e.t2=me,e.next=5,window.BarcodeDetector.getSupportedFormats();case 5:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),Object(de["a"])(t,fe,new window.BarcodeDetector({formats:Object(ve["a"])(t,me)}));case 8:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),Object(de["a"])(this,he,Object(ve["a"])(this,be).call(this))}return Object(le["a"])(e,[{key:"isReady",get:function(){return Object(ve["a"])(this,he)}},{key:"supportedFormats",get:function(){return Object(ve["a"])(this,me)}},{key:"detect",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(Object(ve["a"])(n,fe)){var a=function a(){Object(ve["a"])(n,fe).detect(t).then((function(t){t.length>0?e(t):requestAnimationFrame(a)})).catch((function(e){console.log("Error",e.message)}))};a()}else e([])})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"supported",get:function(){return"BarcodeDetector"in window}}]),e}(),we={props:{rawValue:{type:String,required:!0},format:{type:String,required:!0,validator:function(e){return Object.values(pe).includes(e)}}},computed:{isURL:function(){return this.rawValue.match(/^https?:\/\/.+$/)}},methods:{copyToClipboard:function(){navigator.clipboard.writeText(this.rawValue),this.$emit("copy")}}},_e=we,Oe=n("1800"),Ve=Object(b["a"])(_e,oe,se,!1,null,null,null),ye=Ve.exports;w()(Ve,{VBtn:_["a"],VIcon:O["a"],VListItem:y["a"],VListItemAction:Oe["a"],VListItemContent:j["a"],VListItemSubtitle:j["b"],VListItemTitle:j["c"]});var ke={components:{ResultListItem:ye},data:function(){return{visible:!1,results:[],copySnackbar:!1}},watch:{visible:function(e){e||(this.results=[],this.$emit("close"))}},methods:{show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0!==e.length&&(this.results=e,this.visible=!0)}}},je=ke,Se=n("b0af"),xe=n("169a"),Ee=n("ce7e"),Ae=n("2db4"),De=n("71d9"),Ce=n("2a7f"),Ie=Object(b["a"])(je,re,ie,!1,null,null,null),Te=Ie.exports;w()(Ie,{VBtn:_["a"],VCard:Se["a"],VDialog:xe["a"],VDivider:Ee["a"],VIcon:O["a"],VList:V["a"],VSnackbar:Ae["a"],VSpacer:W["a"],VToolbar:De["a"],VToolbarTitle:Ce["a"]});var Ne={name:"App",components:{AppBar:Z,Camera:ae,DetectionResult:Te},data:function(){return{detectorIsReady:!1,loading:!0,deviceId:null}},created:function(){var e=this;this.supported=ge.supported,this.supported&&(this.detector=new ge,this.detector.isReady.then((function(){e.detectorIsReady=!0})))},mounted:function(){this.supported&&this.startCamera()},methods:{onOpenVideo:function(e){this.deviceId=e},startCamera:function(){this.loading=!0,this.$refs.camera.start()},stopCamera:function(){this.$refs.camera.stop()},startDetection:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.detector.isReady;case 2:return t.loading=!1,n.next=5,t.detector.detect(e);case 5:a=n.sent.reduce((function(e,t){return e.map((function(e){return e.rawValue})).includes(t.rawValue)?e:[].concat(Object(o["a"])(e),[t])}),[]),a.length>0&&(t.$refs.results.show(a),t.stopCamera());case 7:case"end":return n.stop()}}),n)})))()}}},Re=Ne,Le=n("7496"),Pe=n("f6c4"),$e=n("490a"),Ue=Object(b["a"])(Re,r,i,!1,null,null,null),Me=Ue.exports;w()(Ue,{VApp:Le["a"],VMain:Pe["a"],VProgressCircular:$e["a"]});var Be=n("9483");Object(Be["a"])("".concat("/code-scanner-pwa/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Fe=n("f309");a["a"].use(Fe["a"]);var He=new Fe["a"]({theme:{dark:!0}});a["a"].config.productionTip=!1,new a["a"]({i18n:U,vuetify:He,render:function(e){return e(Me)}}).$mount("#app")},edd4:function(e){e.exports=JSON.parse('{"bad_browser":"Oops! This application is supported by Chromium based browsers only.","camera_not_allowed":"Please allow access to your camera to use this application."}')},f693:function(e){e.exports=JSON.parse('{"message":"bonjour i18n !!"}')}});
//# sourceMappingURL=app.8f0fb0b3.js.map